{"numFailedTestSuites":1,"numFailedTests":26,"numPassedTestSuites":1,"numPassedTests":35,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":2,"numTotalTests":61,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1769912396757,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should generate all 4 mantra styles from distilled letters","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate all 4 mantra styles from distilled letters"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should generate correct syllabic mantra (2-letter chunks)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should generate correct syllabic mantra (2-letter chunks)"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should generate correct rhythmic mantra (3-letter chunks)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate correct rhythmic mantra (3-letter chunks)"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should handle exactly divisible rhythmic chunks","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle exactly divisible rhythmic chunks"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should generate correct letter-by-letter pronunciation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate correct letter-by-letter pronunciation"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should generate phonetic mantra with correct rules","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should generate phonetic mantra with correct rules"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should handle minimum valid input (2 letters)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle minimum valid input (2 letters)"},{"ancestorTitles":["MantraGenerator Service","generateMantra"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service generateMantra should handle longer letter sequences","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle longer letter sequences"},{"ancestorTitles":["MantraGenerator Service","Error Handling"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Error Handling should throw error for empty letters array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for empty letters array"},{"ancestorTitles":["MantraGenerator Service","Error Handling"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Error Handling should throw error for null/undefined input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw error for null/undefined input"},{"ancestorTitles":["MantraGenerator Service","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Error Handling should throw error for single letter (less than minimum)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for single letter (less than minimum)"},{"ancestorTitles":["MantraGenerator Service","Phonetic Generation Rules"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Phonetic Generation Rules should recognize TH digraph","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recognize TH digraph"},{"ancestorTitles":["MantraGenerator Service","Phonetic Generation Rules"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Phonetic Generation Rules should recognize CH digraph","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recognize CH digraph"},{"ancestorTitles":["MantraGenerator Service","Phonetic Generation Rules"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Phonetic Generation Rules should recognize SH digraph","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recognize SH digraph"},{"ancestorTitles":["MantraGenerator Service","Phonetic Generation Rules"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Phonetic Generation Rules should handle single consonants correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle single consonants correctly"},{"ancestorTitles":["MantraGenerator Service","getRecommendedMantraStyle"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service getRecommendedMantraStyle should recommend syllabic for short sequences (≤4 letters)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recommend syllabic for short sequences (≤4 letters)"},{"ancestorTitles":["MantraGenerator Service","getRecommendedMantraStyle"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service getRecommendedMantraStyle should recommend phonetic for medium sequences (5-7 letters)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recommend phonetic for medium sequences (5-7 letters)"},{"ancestorTitles":["MantraGenerator Service","getRecommendedMantraStyle"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service getRecommendedMantraStyle should recommend rhythmic for long sequences (≥8 letters)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should recommend rhythmic for long sequences (≥8 letters)"},{"ancestorTitles":["MantraGenerator Service","formatMantraForTTS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service formatMantraForTTS should format syllabic mantra with commas for pauses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should format syllabic mantra with commas for pauses"},{"ancestorTitles":["MantraGenerator Service","formatMantraForTTS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service formatMantraForTTS should format rhythmic mantra with ellipses for longer pauses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should format rhythmic mantra with ellipses for longer pauses"},{"ancestorTitles":["MantraGenerator Service","formatMantraForTTS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service formatMantraForTTS should keep letter-by-letter format unchanged","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should keep letter-by-letter format unchanged"},{"ancestorTitles":["MantraGenerator Service","formatMantraForTTS"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service formatMantraForTTS should format phonetic mantra with spaces for slight pauses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should format phonetic mantra with spaces for slight pauses"},{"ancestorTitles":["MantraGenerator Service","formatMantraForTTS"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service formatMantraForTTS should handle unknown style gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle unknown style gracefully"},{"ancestorTitles":["MantraGenerator Service","Letter Pronunciations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Letter Pronunciations should pronounce all vowels correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should pronounce all vowels correctly"},{"ancestorTitles":["MantraGenerator Service","Letter Pronunciations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Letter Pronunciations should pronounce consonants correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should pronounce consonants correctly"},{"ancestorTitles":["MantraGenerator Service","Letter Pronunciations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Letter Pronunciations should pronounce special letters correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should pronounce special letters correctly"},{"ancestorTitles":["MantraGenerator Service","Integration - Real World Examples"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Integration - Real World Examples should generate mantras for \"I AM STRONG\" distillation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should generate mantras for \"I AM STRONG\" distillation"},{"ancestorTitles":["MantraGenerator Service","Integration - Real World Examples"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Integration - Real World Examples should generate mantras for \"LOVE\" distillation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should generate mantras for \"LOVE\" distillation"},{"ancestorTitles":["MantraGenerator Service","Integration - Real World Examples"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Integration - Real World Examples should generate mantras for \"CREATIVITY\" distillation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should generate mantras for \"CREATIVITY\" distillation"},{"ancestorTitles":["MantraGenerator Service","Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Edge Cases should handle all same letter","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle all same letter"},{"ancestorTitles":["MantraGenerator Service","Edge Cases"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Edge Cases should handle alternating letters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle alternating letters"},{"ancestorTitles":["MantraGenerator Service","Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MantraGenerator Service Edge Cases should handle maximum realistic length (15 letters)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle maximum realistic length (15 letters)"}],"endTime":1769912402192,"message":"","name":"C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\MantraGenerator.test.ts","startTime":1769912397720,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AIEnhancer Service","getCostEstimate"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"AIEnhancer Service getCostEstimate should return Gemini cost estimate when service is available","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return Gemini cost estimate when service is available"},{"ancestorTitles":["AIEnhancer Service","getCostEstimate"],"duration":3,"failureDetails":[{"matcherResult":{"actual":0.16,"expected":0.04,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.04\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.04\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:86:20)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service getCostEstimate should return draft tier cost estimate (2 variations)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return draft tier cost estimate (2 variations)"},{"ancestorTitles":["AIEnhancer Service","getCostEstimate"],"duration":2,"failureDetails":[{"matcherResult":{"actual":0.16,"expected":0.04,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.04\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.04\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:98:20)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service getCostEstimate should fallback to Replicate cost when Gemini unavailable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fallback to Replicate cost when Gemini unavailable"},{"ancestorTitles":["AIEnhancer Service","getCostEstimate"],"duration":1,"failureDetails":[{"matcherResult":{"actual":0.16,"expected":0.02,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.02\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m0.02\u001b[39m\nReceived: \u001b[31m0.16\u001b[39m\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:109:20)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service getCostEstimate should return draft Replicate cost when Gemini unavailable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return draft Replicate cost when Gemini unavailable"},{"ancestorTitles":["AIEnhancer Service","estimateControlNetGenerationTime"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: geminiService.getTimeEstimate is not a function\n    at estimateControlNetGenerationTime (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\AIEnhancer.ts:841:26)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:125:56)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service estimateControlNetGenerationTime should return Gemini time estimate when available","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return Gemini time estimate when available"},{"ancestorTitles":["AIEnhancer Service","estimateControlNetGenerationTime"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: geminiService.getTimeEstimate is not a function\n    at estimateControlNetGenerationTime (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\AIEnhancer.ts:841:26)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:138:56)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service estimateControlNetGenerationTime should return draft time estimate for Gemini","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return draft time estimate for Gemini"},{"ancestorTitles":["AIEnhancer Service","estimateControlNetGenerationTime"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: geminiService.getTimeEstimate is not a function\n    at estimateControlNetGenerationTime (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\AIEnhancer.ts:841:26)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:149:56)\n    at Promise.then.completed (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service estimateControlNetGenerationTime should fallback to Replicate time when Gemini unavailable","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fallback to Replicate time when Gemini unavailable"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithAI - Gemini Integration"],"duration":5001,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:160:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:159:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithAI - Gemini Integration should use Gemini as primary provider when available","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use Gemini as primary provider when available"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithAI - Gemini Integration"],"duration":5003,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:208:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:159:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithAI - Gemini Integration should request 2 variations for draft tier","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should request 2 variations for draft tier"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithAI - Gemini Integration"],"duration":5011,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:250:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:159:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithAI - Gemini Integration should fallback to Replicate when Gemini fails","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should fallback to Replicate when Gemini fails"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithAI - Gemini Integration"],"duration":5013,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:273:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:159:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithAI - Gemini Integration should handle empty intention text gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should handle empty intention text gracefully"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":5000,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:323:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:322:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should generate variations in mock mode when no API token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate variations in mock mode when no API token"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":5014,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:343:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:322:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should include symbol instructions for recognized keywords","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"failed","title":"should include symbol instructions for recognized keywords"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":5004,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:360:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:322:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should handle strength/gym keywords with specific symbols","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should handle strength/gym keywords with specific symbols"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should throw error for invalid style choice","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for invalid style choice"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":5015,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:386:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:322:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should use correct ControlNet method for each style","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should use correct ControlNet method for each style"},{"ancestorTitles":["AIEnhancer Service","enhanceSigilWithControlNet - Replicate Integration"],"duration":5007,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:408:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:322:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service enhanceSigilWithControlNet - Replicate Integration should apply style-specific parameter overrides","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should apply style-specific parameter overrides"},{"ancestorTitles":["AIEnhancer Service","Error Handling"],"duration":5003,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:431:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:430:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Error Handling should handle Gemini unavailable gracefully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"should handle Gemini unavailable gracefully"},{"ancestorTitles":["AIEnhancer Service","Error Handling"],"duration":5008,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:451:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:430:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Error Handling should throw error when REPLICATE_API_TOKEN is missing in production mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should throw error when REPLICATE_API_TOKEN is missing in production mode"},{"ancestorTitles":["AIEnhancer Service","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AIEnhancer Service Error Handling should handle SVG rasterization failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle SVG rasterization failure"},{"ancestorTitles":["AIEnhancer Service","Error Handling"],"duration":5002,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:502:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:430:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Error Handling should handle Gemini image upload failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should handle Gemini image upload failure"},{"ancestorTitles":["AIEnhancer Service","Structure Validation"],"duration":5000,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:536:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:535:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Structure Validation should include structure match scores in variations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should include structure match scores in variations"},{"ancestorTitles":["AIEnhancer Service","Structure Validation"],"duration":5011,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:558:5\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:535:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Structure Validation should report passing count and best variation index","invocations":1,"location":null,"numPassingAsserts":21,"retryReasons":[],"status":"failed","title":"should report passing count and best variation index"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5008,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle watercolor style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle watercolor style correctly"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5001,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle sacred_geometry style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle sacred_geometry style correctly"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5006,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle ink_brush style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle ink_brush style correctly"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5001,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle gold_leaf style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle gold_leaf style correctly"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5013,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle cosmic style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle cosmic style correctly"},{"ancestorTitles":["AIEnhancer Service","Style Coverage"],"duration":5013,"failureDetails":[{"message":"thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\""}],"failureMessages":["Error: thrown: \"Exceeded timeout of 5000 ms for a test.\nAdd a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:47:15\n    at Array.forEach (<anonymous>)\n    at eachBind (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-each\\build\\bind.js:39:22)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:590:23\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:580:3\n    at _dispatchDescribe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:91:26)\n    at describe (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\index.js:55:5)\n    at Object.<anonymous> (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts:40:1)\n    at Runtime._execModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1439:24)\n    at Runtime._loadModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:1022:12)\n    at Runtime.requireModule (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runtime\\build\\index.js:882:12)\n    at jestAdapter (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:77:13)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at runTestInternal (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\node_modules\\jest-runner\\build\\testWorker.js:106:12)"],"fullName":"AIEnhancer Service Style Coverage should handle minimal_line style correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"failed","title":"should handle minimal_line style correctly"}],"endTime":1769912504158,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › getCostEstimate › should return draft tier cost estimate (2 variations)\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m0.04\u001b[39m\n    Received: \u001b[31m0.16\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 84 |\u001b[39m       \u001b[36mconst\u001b[39m cost \u001b[33m=\u001b[39m getCostEstimate(\u001b[32m'draft'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 86 |\u001b[39m       expect(cost)\u001b[33m.\u001b[39mtoBe(\u001b[35m0.04\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m       expect(mockGeminiService\u001b[33m.\u001b[39mgetCostEstimate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[35m2\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'draft'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:86:20)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › getCostEstimate › should fallback to Replicate cost when Gemini unavailable\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m0.04\u001b[39m\n    Received: \u001b[31m0.16\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  96 |\u001b[39m       \u001b[36mconst\u001b[39m cost \u001b[33m=\u001b[39m getCostEstimate(\u001b[32m'premium'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  97 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  98 |\u001b[39m       expect(cost)\u001b[33m.\u001b[39mtoBe(\u001b[35m0.04\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Replicate fallback cost\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 101 |\u001b[39m     it(\u001b[32m'should return draft Replicate cost when Gemini unavailable'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:98:20)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › getCostEstimate › should return draft Replicate cost when Gemini unavailable\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m0.02\u001b[39m\n    Received: \u001b[31m0.16\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 107 |\u001b[39m       \u001b[36mconst\u001b[39m cost \u001b[33m=\u001b[39m getCostEstimate(\u001b[32m'draft'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 109 |\u001b[39m       expect(cost)\u001b[33m.\u001b[39mtoBe(\u001b[35m0.02\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Draft Replicate cost\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 110 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:109:20)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › estimateControlNetGenerationTime › should return Gemini time estimate when available\u001b[39m\u001b[22m\n\n    TypeError: geminiService.getTimeEstimate is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 839 |\u001b[39m     \u001b[90m// Premium: 4 images in ~24-40 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 840 |\u001b[39m     \u001b[90m// Draft: 4 images in ~9-15 seconds\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 841 |\u001b[39m     \u001b[36mreturn\u001b[39m geminiService\u001b[33m.\u001b[39mgetTimeEstimate(tier)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 842 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 843 |\u001b[39m   \u001b[90m// Replicate fallback: Sequential generation, 2 images in ~40-60 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 844 |\u001b[39m   \u001b[36mreturn\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat estimateControlNetGenerationTime (\u001b[22m\u001b[2msrc/services/AIEnhancer.ts\u001b[2m:841:26)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:125:56)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › estimateControlNetGenerationTime › should return draft time estimate for Gemini\u001b[39m\u001b[22m\n\n    TypeError: geminiService.getTimeEstimate is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 839 |\u001b[39m     \u001b[90m// Premium: 4 images in ~24-40 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 840 |\u001b[39m     \u001b[90m// Draft: 4 images in ~9-15 seconds\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 841 |\u001b[39m     \u001b[36mreturn\u001b[39m geminiService\u001b[33m.\u001b[39mgetTimeEstimate(tier)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 842 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 843 |\u001b[39m   \u001b[90m// Replicate fallback: Sequential generation, 2 images in ~40-60 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 844 |\u001b[39m   \u001b[36mreturn\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat estimateControlNetGenerationTime (\u001b[22m\u001b[2msrc/services/AIEnhancer.ts\u001b[2m:841:26)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:138:56)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › estimateControlNetGenerationTime › should fallback to Replicate time when Gemini unavailable\u001b[39m\u001b[22m\n\n    TypeError: geminiService.getTimeEstimate is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 839 |\u001b[39m     \u001b[90m// Premium: 4 images in ~24-40 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 840 |\u001b[39m     \u001b[90m// Draft: 4 images in ~9-15 seconds\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 841 |\u001b[39m     \u001b[36mreturn\u001b[39m geminiService\u001b[33m.\u001b[39mgetTimeEstimate(tier)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 842 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 843 |\u001b[39m   \u001b[90m// Replicate fallback: Sequential generation, 2 images in ~40-60 seconds\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 844 |\u001b[39m   \u001b[36mreturn\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat estimateControlNetGenerationTime (\u001b[22m\u001b[2msrc/services/AIEnhancer.ts\u001b[2m:841:26)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:149:56)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithAI - Gemini Integration › should use Gemini as primary provider when available\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 158 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m   describe(\u001b[32m'enhanceSigilWithAI - Gemini Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 160 |\u001b[39m     it(\u001b[32m'should use Gemini as primary provider when available'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 161 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiResult \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 162 |\u001b[39m         images\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m           { base64\u001b[33m:\u001b[39m \u001b[33mBuffer\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(\u001b[32m'image1'\u001b[39m)\u001b[33m.\u001b[39mtoString(\u001b[32m'base64'\u001b[39m)\u001b[33m,\u001b[39m seed\u001b[33m:\u001b[39m \u001b[35m123\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:160:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:159:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithAI - Gemini Integration › should request 2 variations for draft tier\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 206 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 208 |\u001b[39m     it(\u001b[32m'should request 2 variations for draft tier'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiResult \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 210 |\u001b[39m         images\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m           { base64\u001b[33m:\u001b[39m \u001b[33mBuffer\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(\u001b[32m'image1'\u001b[39m)\u001b[33m.\u001b[39mtoString(\u001b[32m'base64'\u001b[39m)\u001b[33m,\u001b[39m seed\u001b[33m:\u001b[39m \u001b[35m123\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:208:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:159:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithAI - Gemini Integration › should fallback to Replicate when Gemini fails\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 248 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 249 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 250 |\u001b[39m     it(\u001b[32m'should fallback to Replicate when Gemini fails'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 251 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiService \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 252 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(\u001b[36mtrue\u001b[39m)\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 253 |\u001b[39m         enhanceSigil\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Gemini API error'\u001b[39m))\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:250:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:159:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithAI - Gemini Integration › should handle empty intention text gracefully\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 271 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 272 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 273 |\u001b[39m     it(\u001b[32m'should handle empty intention text gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 274 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiResult \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 275 |\u001b[39m         images\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m           { base64\u001b[33m:\u001b[39m \u001b[33mBuffer\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(\u001b[32m'image1'\u001b[39m)\u001b[33m.\u001b[39mtoString(\u001b[32m'base64'\u001b[39m)\u001b[33m,\u001b[39m seed\u001b[33m:\u001b[39m \u001b[35m123\u001b[39m }\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:273:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:159:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithControlNet - Replicate Integration › should generate variations in mock mode when no API token\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 321 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 322 |\u001b[39m   describe(\u001b[32m'enhanceSigilWithControlNet - Replicate Integration'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 323 |\u001b[39m     it(\u001b[32m'should generate variations in mock mode when no API token'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 324 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 325 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:323:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:322:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithControlNet - Replicate Integration › should include symbol instructions for recognized keywords\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 341 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 342 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 343 |\u001b[39m     it(\u001b[32m'should include symbol instructions for recognized keywords'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 344 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 345 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 346 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:343:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:322:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithControlNet - Replicate Integration › should handle strength/gym keywords with specific symbols\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 358 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 359 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 360 |\u001b[39m     it(\u001b[32m'should handle strength/gym keywords with specific symbols'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 361 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 362 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 363 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:360:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:322:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithControlNet - Replicate Integration › should use correct ControlNet method for each style\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 384 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 385 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 386 |\u001b[39m     it(\u001b[32m'should use correct ControlNet method for each style'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 387 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 388 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 389 |\u001b[39m       \u001b[90m// Watercolor uses lineart\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:386:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:322:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › enhanceSigilWithControlNet - Replicate Integration › should apply style-specific parameter overrides\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 406 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 407 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 408 |\u001b[39m     it(\u001b[32m'should apply style-specific parameter overrides'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 409 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 410 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 411 |\u001b[39m       \u001b[90m// Minimal line has highest conditioning_scale and lowest strength\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:408:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:322:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Error Handling › should handle Gemini unavailable gracefully\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 429 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 430 |\u001b[39m   describe(\u001b[32m'Error Handling'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 431 |\u001b[39m     it(\u001b[32m'should handle Gemini unavailable gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 432 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiService \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 433 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(\u001b[36mfalse\u001b[39m)\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 434 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:431:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:430:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Error Handling › should throw error when REPLICATE_API_TOKEN is missing in production mode\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 449 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 450 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 451 |\u001b[39m     it(\u001b[32m'should throw error when REPLICATE_API_TOKEN is missing in production mode'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 452 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiService \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 453 |\u001b[39m         isAvailable\u001b[33m:\u001b[39m jest\u001b[33m.\u001b[39mfn()\u001b[33m.\u001b[39mmockReturnValue(\u001b[36mfalse\u001b[39m)\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 454 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:451:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:430:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Error Handling › should handle Gemini image upload failure\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 500 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 501 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 502 |\u001b[39m     it(\u001b[32m'should handle Gemini image upload failure'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 503 |\u001b[39m       \u001b[36mconst\u001b[39m mockGeminiResult \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 504 |\u001b[39m         images\u001b[33m:\u001b[39m [{ base64\u001b[33m:\u001b[39m \u001b[33mBuffer\u001b[39m\u001b[33m.\u001b[39m\u001b[36mfrom\u001b[39m(\u001b[32m'image1'\u001b[39m)\u001b[33m.\u001b[39mtoString(\u001b[32m'base64'\u001b[39m)\u001b[33m,\u001b[39m seed\u001b[33m:\u001b[39m \u001b[35m123\u001b[39m }]\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 505 |\u001b[39m         prompt\u001b[33m:\u001b[39m \u001b[32m'Test'\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:502:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:430:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Structure Validation › should include structure match scores in variations\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 534 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 535 |\u001b[39m   describe(\u001b[32m'Structure Validation'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 536 |\u001b[39m     it(\u001b[32m'should include structure match scores in variations'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 537 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 538 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 539 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:536:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:535:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Structure Validation › should report passing count and best variation index\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 556 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 557 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 558 |\u001b[39m     it(\u001b[32m'should report passing count and best variation index'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 559 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 560 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 561 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:558:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:535:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle watercolor style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle sacred_geometry style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle ink_brush style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle gold_leaf style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle cosmic style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAIEnhancer Service › Style Coverage › should handle minimal_line style correctly\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 5000 ms for a test.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 588 |\u001b[39m     ]\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 589 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 590 |\u001b[39m     it\u001b[33m.\u001b[39meach(allStyles)(\u001b[32m'should handle %s style correctly'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m (style) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m       process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mREPLICATE_API_TOKEN\u001b[39m \u001b[33m=\u001b[39m \u001b[32m'your-replicate-token'\u001b[39m\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 592 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m       \u001b[36mconst\u001b[39m request\u001b[33m:\u001b[39m \u001b[33mControlNetEnhancementRequest\u001b[39m \u001b[33m=\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/jest-each/build/bind.js\u001b[2m:47:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:590:23\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:580:3\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/services/__tests__/AIEnhancer.test.ts\u001b[39m\u001b[0m\u001b[2m:40:1)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\dwill\\.gemini\\antigravity\\scratch\\Anchor-V2\\backend\\src\\services\\__tests__\\AIEnhancer.test.ts","startTime":1769912397720,"status":"failed","summary":""}],"wasInterrupted":false}
